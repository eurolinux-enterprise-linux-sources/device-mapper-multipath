---
 libmultipath/discovery.c |    5 ++++-
 libmultipath/discovery.h |    2 +-
 2 files changed, 5 insertions(+), 2 deletions(-)

Index: multipath-tools/libmultipath/discovery.c
===================================================================
--- multipath-tools.orig/libmultipath/discovery.c
+++ multipath-tools/libmultipath/discovery.c
@@ -622,7 +622,10 @@ do_inq(int sg_fd, int cmddt, int evpd, u
 	io_hdr.dxferp = resp;
 	io_hdr.cmdp = inqCmdBlk;
 	io_hdr.sbp = sense_b;
-	io_hdr.timeout = DEF_TIMEOUT;
+	if (conf->checker_timeout)
+		io_hdr.timeout = conf->checker_timeout * 1000;
+	else
+		io_hdr.timeout = DEF_TIMEOUT;
 
 	if (ioctl(sg_fd, SG_IO, &io_hdr) < 0)
 		return -1;
Index: multipath-tools/libmultipath/discovery.h
===================================================================
--- multipath-tools.orig/libmultipath/discovery.h
+++ multipath-tools/libmultipath/discovery.h
@@ -14,7 +14,7 @@
 #endif
 
 #ifndef DEF_TIMEOUT
-#define DEF_TIMEOUT	300000
+#define DEF_TIMEOUT	60000
 #endif
 
 /*
