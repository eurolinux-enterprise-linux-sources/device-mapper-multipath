---
 multipathd/cli_handlers.c |    3 +++
 1 file changed, 3 insertions(+)

Index: multipath-tools/multipathd/cli_handlers.c
===================================================================
--- multipath-tools.orig/multipathd/cli_handlers.c
+++ multipath-tools/multipathd/cli_handlers.c
@@ -525,6 +525,8 @@ cli_del_map (void * v, char ** reply, in
 int resize_map(struct multipath *mpp, unsigned long long size,
 	       struct vectors * vecs)
 {
+	unsigned long long orig_size = mpp->size;
+
 	mpp->size = size;
 	update_mpp_paths(mpp, vecs->pathvec);
 	setup_map(mpp);
@@ -532,6 +534,7 @@ int resize_map(struct multipath *mpp, un
 	if (domap(mpp) <= 0) {
 		condlog(0, "%s: failed to resize map : %s", mpp->alias,
 			strerror(errno));
+		mpp->size = orig_size;
 		return 1;
 	}
 	return 0;
